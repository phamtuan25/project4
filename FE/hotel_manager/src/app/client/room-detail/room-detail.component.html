<div class="container" *ngIf="roomDetail">
  <div class="row full-height">
    <div class="col-md-7">
      <div id="roomCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <ol class="carousel-indicators">
            <li *ngFor="let image of roomDetail.images; let i = index" [attr.data-bs-target]="'#roomCarousel'"
                [attr.data-bs-slide-to]="i" [class.active]="i === 0"></li>
          </ol>
          <div class="carousel-inner">
            <div *ngFor="let image of roomDetail.images; let i = index" class="carousel-item" [ngClass]="{'active': i === 0}">
              <img [src]="'http://localhost:8080/upload_images/' + image" alt="Room Image" class="d-block w-100" style="height: 400px; object-fit: cover;" />
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#roomCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon bi bi-chevron-left" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#roomCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon bi bi-chevron-right" aria-hidden="true"></span>
        </button>
      </div>
    </div>

    <div class="col-md-5 booking-section">
      <h2>Book Your Room</h2>
      <form [formGroup]="bookingForm" (ngSubmit)="addRoomToBooking()">
        <input type="hidden" name="roomId" [value]="roomDetail.roomId">

        <!-- Pricing Option Selector -->
        <div class="form-group">
          <label for="pricingOption">Pricing Option</label>
          <select class="form-control" id="pricingOption" formControlName="pricingOption" (change)="onPricingOptionChange($event)">
            <option value="hourly">Hourly</option>
            <option value="daily">Daily</option>
          </select>
        </div>

        <!-- Check-in / Check-out for Hourly -->
        <div class="mb-3" *ngIf="pricingOption === 'hourly'">
          <label for="checkin" class="form-label">Check-in (Date and Time)</label>
          <input type="datetime-local" class="form-control" id="checkin" formControlName="checkin" required>
        </div>
        
        <!-- Check-in / Check-out for Daily -->
        <div class="mb-3" *ngIf="pricingOption === 'daily'">
          <label for="checkin" class="form-label">Check-in (Date Only)</label>
          <input type="date" class="form-control" id="checkin" formControlName="checkin" required>
        </div>

        <div class="mb-3" *ngIf="pricingOption === 'hourly'">
          <label for="checkout" class="form-label">Check-out (Date and Time)</label>
          <input type="datetime-local" class="form-control" id="checkout" formControlName="checkout" required>
        </div>

        <!-- Check-out for Daily -->
        <div class="mb-3" *ngIf="pricingOption === 'daily'">
          <label for="checkout" class="form-label">Check-out (Date Only)</label>
          <input type="date" class="form-control" id="checkout" formControlName="checkout" required>
        </div>
        <div class="mb-3">
          <label for="specialRequests">Special Requests</label>
          <textarea class="form-control" id="specialRequests" formControlName="specialRequests"></textarea>
        </div>
      
        <div class="mb-3">
          <label for="price">Price</label>
          <input type="text" class="form-control" id="price" [value]="bookingForm.get('price')?.value | currency: 'USD':true" readonly>
        </div>
        <!-- <div class="mb-3">
          <label for="roomType" class="form-label">Room Type</label>
          <select class="form-select" id="roomType" formControlName="roomType" required>
            <option value="" disabled selected>Choose...</option>
            <option value="standard">Standard</option>
            <option value="deluxe">Deluxe</option>
            <option value="suite">Suite</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="service" class="form-label">Service (Optional)</label>
          <select class="form-select" id="service" formControlName="service">
            <option value="" disabled selected>Choose...</option>
            <option value="breakfast">Breakfast</option>
            <option value="spa">Spa</option>
            <option value="transport">Transport</option>
          </select>
        </div> -->

        <button type="submit" class="btn btn-success w-100">Confirm Booking</button>
      </form>
    </div>
  </div>

  <!-- Room Details -->
  <div class="details mt-4">
    <h3>Room Name: <span class="text-primary">{{ roomDetail.roomNumber }}</span></h3>
    <p><strong>Room Type:</strong> {{ roomDetail.roomType }}</p>
    <h5>Daily Price: <span class="price-red">{{ roomDetail.dayPrice | currency: '$' }}</span></h5>
    <h5>Hourly Price: <span class="price-red">{{ roomDetail.hourPrice | currency: '$' }}</span></h5>
  </div>

  <!-- Back to Room List Button -->
  <button class="btn btn-primary mt-3" (click)="goBack()">Back to List Room</button>
</div>

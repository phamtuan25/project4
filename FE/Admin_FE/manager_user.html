<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Quản Lý Người Dùng</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="sidebar">
        <img src="image/avatar.jpg" alt="Avatar">
        <h5>Nguyễn Văn A</h5>
        <hr>
        <a href="manager_service.html"><i class="fas fa-cogs"></i> Quản Lý Dịch Vụ</a>
        <a href="manager_room.html"><i class="fas fa-door-open"></i> Quản Lý Phòng</a>
        <a href="manager_booking_room.html"><i class="fas fa-calendar-check"></i> Quản Lý Đặt Phòng</a>
        <a href="manager_user.html" class="active"><i class="fas fa-user"></i> Quản Lý Người Dùng</a>
    </div>

    <div class="content">
        <div class="header">
            <h1>Quản Lý Người Dùng</h1>
            <button class="btn btn-danger" onclick="signOut()">
                <i class="fas fa-sign-out-alt"></i> Đăng Xuất
            </button>
        </div>

        <div class="form-group mt-3">
            <div class="input-group">
                <input type="text" class="form-control" id="searchUserInput" placeholder="Tìm kiếm người dùng..."
                    onkeyup="handleKeyPress(event)">
                <div class="input-group-append">
                    <button class="btn btn-primary" onclick="searchUsers()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="table-responsive">
            <button class="btn btn-primary mb-3" data-toggle="modal" data-target="#addUserModal">Thêm Người
                Dùng</button>
            <button class="btn btn-primary mb-3" data-toggle="modal" data-target="#addRoleModal">Thêm Vai trò người
                Dùng</button>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Họ và Tên</th>
                        <th>Địa Chỉ</th>
                        <th>Số Điện Thoại</th>
                        <th>Vai Trò</th>
                        <th>Địa Chỉ Email</th>
                        <th>Hành Động</th>
                    </tr>
                </thead>
                <tbody id="userTable">
                    <tr>
                        <td>1</td>
                        <td>Nguyễn Văn B</td>
                        <td>123 Đường ABC</td>
                        <td>0912345678</td>
                        <td>Quản Trị</td>
                        <td>nguyenvanb@example.com</td>
                        <td>
                            <button class="btn btn-warning btn-sm"
                                onclick="openEditUserModal(1, 'Nguyễn Văn B', '123 Đường ABC', '0912345678', 'Quản Trị', 'nguyenvanb@example.com')">Sửa</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteUser(1)">Xóa</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Trần Thị C</td>
                        <td>456 Đường DEF</td>
                        <td>0987654321</td>
                        <td>Nhân Viên</td>
                        <td>tranthic@example.com</td>
                        <td>
                            <button class="btn btn-warning btn-sm"
                                onclick="openEditUserModal(2, 'Trần Thị C', '456 Đường DEF', '0987654321', 'Nhân Viên', 'tranthic@example.com')">Sửa</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteUser(2)">Xóa</button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Modal Thêm Vai Trò -->
            <div class="modal fade" id="addRoleModal" tabindex="-1" role="dialog" aria-labelledby="addRoleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="addRoleModalLabel">Thêm Vai Trò Mới</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="addRoleForm">
                                <div class="form-group">
                                    <label for="roleName">Tên vai trò</label>
                                    <input type="text" class="form-control" id="roleName" required>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                            <button type="button" class="btn btn-primary" onclick="submitRole()">Lưu</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Thêm Người Dùng -->
            <div class="modal fade" id="addUserModal" tabindex="-1" role="dialog" aria-labelledby="addUserModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="addUserModalLabel">Thêm Người Dùng Mới</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="addUserForm">
                                <div class="form-group">
                                    <label for="userName">Họ và Tên</label>
                                    <input type="text" class="form-control" id="userName" required>
                                </div>
                                <div class="form-group">
                                    <label for="userAddress">Địa Chỉ</label>
                                    <input type="text" class="form-control" id="userAddress" required>
                                </div>
                                <div class="form-group">
                                    <label for="userPhone">Số Điện Thoại</label>
                                    <input type="text" class="form-control" id="userPhone" required>
                                </div>
                                <div class="form-group">
                                    <label for="userRole">Vai Trò</label>
                                    <select class="form-control" id="userRole" required>
                                        <option value="Quản Trị">Quản Trị</option>
                                        <option value="Nhân Viên">Nhân Viên</option>
                                        <option value="Khách Hàng">Khách Hàng</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="userEmail">Địa Chỉ Email</label>
                                    <input type="email" class="form-control" id="userEmail" required>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                            <button type="button" class="btn btn-primary" onclick="submitUser()">Lưu</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Sửa Người Dùng -->
            <div class="modal fade" id="editUserModal" tabindex="-1" role="dialog" aria-labelledby="editUserModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="editUserModalLabel">Sửa Người Dùng</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="editUserForm">
                                <input type="hidden" id="editUserId">
                                <div class="form-group">
                                    <label for="editUserName">Họ và Tên</label>
                                    <input type="text" class="form-control" id="editUserName" required>
                                </div>
                                <div class="form-group">
                                    <label for="editUserAddress">Địa Chỉ</label>
                                    <input type="text" class="form-control" id="editUserAddress" required>
                                </div>
                                <div class="form-group">
                                    <label for="editUserPhone">Số Điện Thoại</label>
                                    <input type="text" class="form-control" id="editUserPhone" required>
                                </div>
                                <div class="form-group">
                                    <label for="editUserRole">Vai Trò</label>
                                    <select class="form-control" id="editUserRole" required>
                                        <option value="Quản Trị">Quản Trị</option>
                                        <option value="Nhân Viên">Nhân Viên</option>
                                        <option value="Khách Hàng">Khách Hàng</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="editUserEmail">Địa Chỉ Email</label>
                                    <input type="email" class="form-control" id="editUserEmail" required>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                            <button type="button" class="btn btn-primary" onclick="submitEditUser()">Lưu</button>
                        </div>
                    </div>
                </div>
            </div>

            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <script>
        function searchUsers() {
            const input = document.getElementById('searchUserInput').value.toLowerCase();
            const filteredUsers = users.filter(user => {
                return user.name.toLowerCase().includes(input) ||
                    user.address.toLowerCase().includes(input) ||
                    user.phone.toLowerCase().includes(input) ||
                    user.role.toLowerCase().includes(input) ||
                    user.email.toLowerCase().includes(input);
            });

            renderUsers(filteredUsers);
        }

        function submitRole() {
            const roleName = document.getElementById('roleName').value.trim();


            if (!roleName) {
                alert("Vui lòng điền đầy đủ thông tin!");
                return;
            }

            alert("Đã thêm vai trò: ${roleName}");
            $('#addRoleModal').modal('hide');
            document.getElementById('addRoleForm').reset();
        }

        function submitUser() {
            const userName = document.getElementById('userName').value.trim();
            const userAddress = document.getElementById('userAddress').value.trim();
            const userPhone = document.getElementById('userPhone').value.trim();
            const userRole = document.getElementById('userRole').value.trim();
            const userEmail = document.getElementById('userEmail').value.trim();

            if (!userName || !userAddress || !userPhone || !userRole || !userEmail) {
                alert("Vui lòng điền đầy đủ thông tin!");
                return;
            }

            alert(`Đã thêm người dùng: ${userName}, Vai trò: ${userRole}`);
            $('#addUserModal').modal('hide');
            document.getElementById('addUserForm').reset();
        }

        function openEditUserModal(id, name, address, phone, role, email) {
            document.getElementById('editUserId').value = id;
            document.getElementById('editUserName').value = name;
            document.getElementById('editUserAddress').value = address;
            document.getElementById('editUserPhone').value = phone;
            document.getElementById('editUserRole').value = role;
            document.getElementById('editUserEmail').value = email;
            $('#editUserModal').modal('show');
        }

        function submitEditUser() {
            const id = document.getElementById('editUserId').value;
            const userName = document.getElementById('editUserName').value.trim();
            const userAddress = document.getElementById('editUserAddress').value.trim();
            const userPhone = document.getElementById('editUserPhone').value.trim();
            const userRole = document.getElementById('editUserRole').value.trim();
            const userEmail = document.getElementById('editUserEmail').value.trim();

            if (!userName || !userAddress || !userPhone || !userRole || !userEmail) {
                alert("Vui lòng điền đầy đủ thông tin!");
                return;
            }

            alert(`Đã sửa người dùng: ID: ${id}, Tên: ${userName}, Vai trò: ${userRole}`);
            $('#editUserModal').modal('hide');
            document.getElementById('editUserForm').reset();
        }

        function deleteUser(id) {
            if (confirm(`Bạn có chắc chắn muốn xóa người dùng với ID: ${id}?`)) {
                alert(`Người dùng với ID ${id} đã bị xóa!`);
                // Thêm logic để xóa người dùng từ bảng
            }
        }

        function signOut() {
            if (confirm("Bạn có chắc chắn muốn đăng xuất?")) {
                alert("Đã đăng xuất!");
                window.location.href = 'login.html'; // Điều hướng đến trang đăng nhập
            }
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>